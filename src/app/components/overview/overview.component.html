<div class="overview-container">
  <div class="header">
    <h2>Dashboard Overview</h2>
  </div>

  <div class="dashboard-content">
    <!-- Entity Counts Section -->
    <section class="section">
      <h3 class="section-title">Entity Summary</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon personas">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().personas }}</span>
            <span class="stat-label">Personas</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon use-cases">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 20h9"/>
              <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().useCases }}</span>
            <span class="stat-label">Use Cases</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon tools">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().tools }}</span>
            <span class="stat-label">Tools</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon data-models">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <ellipse cx="12" cy="5" rx="9" ry="3"/>
              <path d="M3 5V19A9 3 0 0 0 21 19V5"/>
              <path d="M3 12A9 3 0 0 0 21 12"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().dataModels }}</span>
            <span class="stat-label">Data Models</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon domains">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect width="18" height="18" x="3" y="3" rx="2"/>
              <path d="M3 9h18"/>
              <path d="M9 21V9"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().domains }}</span>
            <span class="stat-label">Domains</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon kpis">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3v18h18"/>
              <path d="m19 9-5 5-4-4-3 3"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ entityCounts().kpis }}</span>
            <span class="stat-label">KPIs</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon dq-rules">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/>
              <path d="m9 12 2 2 4-4"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value">{{ totalDQRulesCount() }}</span>
            <span class="stat-label">DQ Rules</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Coverage Metrics Section -->
    <section class="section">
      <h3 class="section-title">Coverage Metrics</h3>
      <div class="metrics-grid">
        <!-- Personas with KPIs -->
        <div class="metric-card">
          <div class="metric-header">
            <h4>Personas with KPIs</h4>
            <span class="metric-badge" [style.background]="getProgressBgColor(personasWithKPIsPercentage())" [style.color]="getProgressColor(personasWithKPIsPercentage())">
              {{ personasWithKPIsPercentage() }}%
            </span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="personasWithKPIsPercentage()"
              [style.background]="getProgressColor(personasWithKPIsPercentage())"
            ></div>
          </div>
          <div class="metric-detail">
            {{ personasWithKPIsCount() }} of {{ entityCounts().personas }} personas have KPIs attached
          </div>
          
          @if (domains().length > 0) {
            <div class="breakdown-section">
              <span class="breakdown-title">By Domain</span>
              <div class="breakdown-list">
                @for (item of personasWithKPIsByDomain(); track item.domainId) {
                  <div class="breakdown-item">
                    <span class="breakdown-label">{{ item.domainName }}</span>
                    <div class="breakdown-bar">
                      <div 
                        class="breakdown-fill" 
                        [style.width.%]="item.percentage"
                        [style.background]="getProgressColor(item.percentage)"
                      ></div>
                    </div>
                    <span class="breakdown-value">{{ item.percentage }}%</span>
                  </div>
                }
              </div>
            </div>
          }
        </div>

        <!-- KPIs Covered by Use Cases -->
        <div class="metric-card">
          <div class="metric-header">
            <h4>KPIs Covered by Use Cases</h4>
            <span class="metric-badge" [style.background]="getProgressBgColor(kpisCoveredPercentage())" [style.color]="getProgressColor(kpisCoveredPercentage())">
              {{ kpisCoveredPercentage() }}%
            </span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="kpisCoveredPercentage()"
              [style.background]="getProgressColor(kpisCoveredPercentage())"
            ></div>
          </div>
          <div class="metric-detail">
            {{ kpisCoveredCount() }} of {{ entityCounts().kpis }} KPIs are covered by at least one use case
          </div>
          
          @if (domains().length > 0) {
            <div class="breakdown-section">
              <span class="breakdown-title">By Domain</span>
              <div class="breakdown-list">
                @for (item of kpisCoveredByDomain(); track item.domainId) {
                  <div class="breakdown-item">
                    <span class="breakdown-label">{{ item.domainName }}</span>
                    <div class="breakdown-bar">
                      <div 
                        class="breakdown-fill" 
                        [style.width.%]="item.percentage"
                        [style.background]="getProgressColor(item.percentage)"
                      ></div>
                    </div>
                    <span class="breakdown-value">{{ item.percentage }}%</span>
                  </div>
                }
              </div>
            </div>
          }
        </div>

        <!-- Domains with Owner -->
        <div class="metric-card">
          <div class="metric-header">
            <h4>Domains with Owner</h4>
            <span class="metric-badge" [style.background]="getProgressBgColor(domainsWithOwnerPercentage())" [style.color]="getProgressColor(domainsWithOwnerPercentage())">
              {{ domainsWithOwnerPercentage() }}%
            </span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="domainsWithOwnerPercentage()"
              [style.background]="getProgressColor(domainsWithOwnerPercentage())"
            ></div>
          </div>
          <div class="metric-detail">
            {{ domainsWithOwnerCount() }} of {{ entityCounts().domains }} domains have an owner assigned
          </div>
        </div>

        <!-- Data Models with Data Quality Rules -->
        <div class="metric-card">
          <div class="metric-header">
            <h4>Data Models with DQ Rules</h4>
            <span class="metric-badge" [style.background]="getProgressBgColor(dataModelsWithDQRulesPercentage())" [style.color]="getProgressColor(dataModelsWithDQRulesPercentage())">
              {{ dataModelsWithDQRulesPercentage() }}%
            </span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="dataModelsWithDQRulesPercentage()"
              [style.background]="getProgressColor(dataModelsWithDQRulesPercentage())"
            ></div>
          </div>
          <div class="metric-detail">
            {{ dataModelsWithDQRulesCount() }} of {{ entityCounts().dataModels }} data models have at least one data quality rule
          </div>
          
          @if (domains().length > 0) {
            <div class="breakdown-section">
              <span class="breakdown-title">By Domain</span>
              <div class="breakdown-list">
                @for (item of dataModelsWithDQByDomain(); track item.domainId) {
                  <div class="breakdown-item">
                    <span class="breakdown-label">{{ item.domainName }}</span>
                    <div class="breakdown-bar">
                      <div 
                        class="breakdown-fill" 
                        [style.width.%]="item.percentage"
                        [style.background]="getProgressColor(item.percentage)"
                      ></div>
                    </div>
                    <span class="breakdown-value">{{ item.percentage }}%</span>
                  </div>
                }
              </div>
            </div>
          }
        </div>

        <!-- Domains with Steward -->
        <div class="metric-card">
          <div class="metric-header">
            <h4>Domains with Steward</h4>
            <span class="metric-badge" [style.background]="getProgressBgColor(domainsWithStewardPercentage())" [style.color]="getProgressColor(domainsWithStewardPercentage())">
              {{ domainsWithStewardPercentage() }}%
            </span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [style.width.%]="domainsWithStewardPercentage()"
              [style.background]="getProgressColor(domainsWithStewardPercentage())"
            ></div>
          </div>
          <div class="metric-detail">
            {{ domainsWithStewardCount() }} of {{ entityCounts().domains }} domains have a steward assigned
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

